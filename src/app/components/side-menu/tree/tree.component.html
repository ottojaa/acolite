<div class="tree-container">
  <p-tree
    [value]="files"
    droppableNodes="true"
    draggableNodes="true"
    expanded="true"
    selectionMode="multiple"
    [validateDrop]="true"
    (onNodeDrop)="onDrop($event)"
    [filter]="true"
    [styleClass]="'tree'"
    (clickOutside)="onClickOutside()"
    [contextMenu]="contextMenu"
    [(selection)]="selectedFiles"
    (onNodeSelect)="onSelectFile($event)"
    (onNodeContextMenuSelect)="onRightClick($event)"
  >
    <ng-template let-node pTemplate="file">
      <span class="node-row" pDraggable="droppable" (onDragStart)="dragStart()" (onDragEnd)="dragEnd()">
        <img class="icon" src="../../../../assets/icons/file-extension-icons/{{ node.data.icon }}" />
        <p>{{ node.label }}</p>
      </span>
    </ng-template>

    <ng-template let-node pTemplate="folder">
      <span
        class="node-row"
        (click)="expand($event, node)"
        (onDragStart)="dragStart(node)"
        (onDragEnd)="dragEnd()"
        pDraggable="droppable"
      >
        <p>{{ node.label }}</p>
      </span>
    </ng-template>
  </p-tree>

  <span
    class="dropzone"
    [ngClass]="{ dragging: isHovering }"
    (dragenter)="onDragEnter($event)"
    (dragleave)="onDragLeave($event)"
    pDroppable="droppable"
    (drop)="dropOutside($event)"
  >
  </span>
</div>

<p-contextMenu
  #contextMenu
  [model]="contextMenuItems"
  [triggerEvent]="'none'"
  (unselectFile)="onUnselectFile()"
></p-contextMenu>
